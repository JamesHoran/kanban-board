mutation CreateBoard($name: String!, $owner_id: uuid!) {
  insert_boards_one(object: { name: $name, owner_id: $owner_id }) {
    id
    name
  }
}

mutation CreateColumn($board_id: uuid!, $name: String!, $position: float8) {
  insert_columns_one(object: { board_id: $board_id, name: $name, position: $position }) {
    id
    name
    position
  }
}

mutation CreateCard($column_id: uuid!, $title: String!, $position: float8, $description: String, $due_date: date) {
  insert_cards_one(object: { column_id: $column_id, title: $title, position: $position, description: $description, due_date: $due_date }) {
    id
    title
    position
    description
    due_date
  }
}

subscription GetBoardsForUser($userId: uuid!) {
  boards(where: { owner_id: { _eq: $userId } }) {
    id
    name
    columns(order_by: { position: asc }) {
      id
      name
      position
      cards(order_by: { position: asc }) {
        id
        title
        description
        position
        due_date
        card_labels {
          card_id
          label {
            id
            name
            color
          }
        }
      }
    }
    labels {
      id
      name
      color
    }
  }
}

mutation UpdateBoard($id: uuid!, $patch: boards_set_input!) {
  update_boards_by_pk(pk_columns: { id: $id }, _set: $patch) {
    id
    name
  }
}

mutation UpdateCard($id: uuid!, $patch: cards_set_input!) {
  update_cards_by_pk(pk_columns: { id: $id }, _set: $patch) {
    id
    title
    position
    description
    column_id
    due_date
  }
}

mutation UpdateColumn($id: uuid!, $patch: columns_set_input!) {
  update_columns_by_pk(pk_columns: { id: $id }, _set: $patch) {
    id
    name
  }
}

mutation UpdateColumnPosition($id: uuid!, $position: float8!) {
  update_columns_by_pk(pk_columns: { id: $id }, _set: { position: $position }) {
    id
    position
  }
}

mutation UpdateCardPosition($id: uuid!, $column_id: uuid!, $position: float8!) {
  update_cards_by_pk(pk_columns: { id: $id }, _set: { column_id: $column_id, position: $position }) {
    id
  }
}

mutation DeleteCard($id: uuid!) {
  delete_cards_by_pk(id: $id) {
    id
  }
}

mutation DeleteBoard($board_id: uuid!) {
  delete_boards_by_pk(id: $board_id) {
    id
  }
}

mutation DeleteColumn($id: uuid!) {
  delete_columns_by_pk(id: $id) {
    id
  }
}

mutation CreateLabel($board_id: uuid!, $name: String!, $color: String!) {
  insert_labels_one(object: { board_id: $board_id, name: $name, color: $color }) {
    id
    name
    color
  }
}

mutation AssignLabelToCard($card_id: uuid!, $label_id: uuid!) {
  insert_card_labels_one(object: { card_id: $card_id, label_id: $label_id }) {
    card_id
    label_id
  }
}

mutation RemoveLabelFromCard($card_id: uuid!, $label_id: uuid!) {
  delete_card_labels(where: { card_id: { _eq: $card_id }, label_id: { _eq: $label_id } }) {
    affected_rows
  }
}

mutation DeleteLabel($id: uuid!) {
  delete_labels_by_pk(id: $id) {
    id
  }
}

mutation DeleteCardLabelsByLabelId($label_id: uuid!) {
  delete_card_labels(where: { label_id: { _eq: $label_id } }) {
    affected_rows
  }
}
